<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings</title>
    <link rel="icon" href="/images/thumnails/original_logo.png" type="image/png">

    <!-- Add responsive meta tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Styles -->
    <link rel="stylesheet" href="/styles/user-header.css">
    <link rel="stylesheet" href="/styles/user-settings.css">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Montserrat:wght@400;700&family=Roboto&display=swap" rel="stylesheet">

    <!-- Scripts -->
     <script src="/config.js"></script>
    <script src="/scripts/main-scripts/globalProvider.js" defer></script>
    <script src="/scripts/main-scripts/set-profile.js" defer></script>
    <script src="/scripts/user-dashboard/crypto-searcher.js" defer></script>
    <script src="/scripts/user-settings/user-settings-account.js" defer></script>
    <script src="/scripts/user-settings/user-settings-profile.js" defer></script>
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-p1a6gU+hX3cwD+eYcB6Zs3aQzFQnHtCpjFE6QzN0n1q7g1IbJVEc4GtE6mC6p5I/VD+T5g6dQ0K1YxXaER4jKg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    />
</head>
<body>
    <header class="header">
        <a href="/dashboard" class="header-left" id="header-left-side">
            <img src="/images/thumnails/logo.png" alt="Fundy Logo">
            <h1>Fundy</h1>
        </a>

        <div class="header-right">
            <!-- Search Bar with Icon -->
            <div class="search-container">
                <img src="/images/search.png" alt="Search Icon" id="search-icon" class="search-icon">
                <input type="text" class="header-search" placeholder="Type / Search a crypto" id="crypto-search-input" autocomplete="off">
                <div id="search-results" class="search-results hidden"></div>
            </div>

            <img src="/images/bell.png" alt="Theme Toggle Icon">
            <img src="/images/list.png" alt="Menu Icon" onclick="toggleMenu2(event)">

            <!-- List Menu -->
            <div id="list-menu" class="list-menu">
                <img src="/images/close.png" alt="Close Button" class="close-button" onclick="closeMenus(event)">
                <div class="profile-container">
                    <img src="/images/account.png" alt="User Icon" class="profile-picture" id="profile-icon1" style="filter: none; border-radius: 50%;">
                    <div class="profile-text">
                        <span class="profile-username" style="margin-bottom: -10px;"><b id="user-username">@Username</b></span>
                        <p class="profile-name-surname" id="given_name">Name Surname</p>
                    </div>
                </div>
                <hr>
                <div class="mini-section">
                    <img src="/images/icons/cryptocurrency.png" alt="Icon">
                    <span class="profile-text">Markets</span>
                </div>
                <div class="mini-section">
                    <img src="/images/butt.png" alt="Icon">
                    <span class="profile-text">Become a trader</span>
                    <img src="/images/free.png" alt="Icon" style="margin-top: 1px; margin-left: 30px;">
                </div>
                <div class="mini-section">
                    <img src="/images/subscription-business-model.png" alt="Icon">
                    <span class="profile-text">Choose Your Plan</span>
                </div>
                <div class="mini-section">
                    <img src="/images/reading-book.png" alt="Icon">
                    <span class="profile-text">Learn how it works</span>
                </div>
                <div class="mini-section">
                    <img src="/images/approve.png" alt="Icon">
                    <span class="profile-text">Documentation</span>
                </div>
                <hr>
                <a href="/settings/profile">
                    <div class="mini-section">
                        <img src="/images/settings.png" alt="Icon">
                        <span class="profile-text">Settings</span>
                    </div>
                </a> 
                <div class="mini-section">
                    <img src="/images/share.png" alt="Icon">
                    <span class="profile-text">Try this</span>
                </div>
                <div class="mini-section">
                    <img src="/images/analysis.png" alt="Icon">
                    <span class="profile-text">See other services</span>
                </div>
            </div>

            <img src="/images/account.png" alt="User Icon" onclick="toggleMenu1(event)" id="profile-icon3" style="filter: none; border-radius: 50%;">

            <!-- Mini menu for the user -->
            <div id="profile-menu" class="profile-menu">
                <div class="profile-header" style="display: flex; align-items: center;">
                    <img src="/images/account.png" alt="User Icon" id="profile-icon2" style="width: 50px; height: 50px; border-radius: 50%; margin-right: 10px; cursor: pointer; filter: none">
                    <div>
                        <span class="profile-name" style="font-size: 16px; font-weight: bold;" id="user-username2">@Username</span>
                        <p style="font-size: 14px; margin: 0;" id="given_name2">Name Surname</p>
                    </div>
                </div>                
                <hr>
                <ul class="menu-links">
                    <li><img src="/images/user_profile.png" alt="Profile Icon" class="menu-icon" style="margin-left: 5px;"> Your Profile</li>
                    <li><img src="/images/icons/transfer.png" alt="A random image" class="menu-icon" style="margin-left: 5px;">Transfer Assets</li>
                    <li onclick="log_out(event)"><img src="/images/exit.png" alt="Logout Icon" class="menu-icon" style="margin-left: 5px;"> Sing Out </li>
                    <hr>
                    <li><a href="/terms"> <img src="/images/terms-and-conditions.png" alt="Terms Icon" class="menu-icon" style="margin-left: 5px;"> Terms & Policies </a></li>
                    <li><img src="/images/help.png" alt="Settings Icon" class="menu-icon" style="margin-left: 5px;"> Help </li>
                </ul>
            </div>
        </div>
    </header>
    
    <div id="notification-bar" class="notification-bar">
        <p id="notification-message">Your profile has been updated successfully!</p>
        <span id="close-notification" class="close-notification">&times;</span>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Left Pane (User Summary and Navigation Menu) -->
        <div id="leftPane">
            <!-- User Summary -->
            <div class="profile-summary">
                <img src="/images/account.png" alt="User Profile picture" id="user-profile-picture">
                <div class="user-info">
                    <span class="username" id="user-name-main">@Username</span>
                    <span class="fullname" id="full-name-main">Name Surname</span>
                </div>
            </div>
            
            <hr class="left-pane-hr">
            <!-- Navigation Menu -->
            <ul class="settings-menu">
                <li data-section="profile" onclick="showSection('profile', event)"><img src="/images/user_profile.png" alt="Profile Icon">Profile</li>
                <li data-section="account" onclick="showSection('account', event)"><img src="/images/account.png" alt="Account Icon">Account</li>
                <li data-section="appearance" onclick="showSection('appearance', event)"><img src="/images/paint-brush.png" alt="Appearance Icon">Appearance</li>
                <li data-section="billing" onclick="showSection('billing', event)"><img src="/images/billing_plan.png" alt="Billing Icon">Billing & Plans</li>
                <li data-section="api" onclick="showSection('api', event)"><img src="/images/api.png" alt="API Icon">API Connections</li>
            </ul>                     
        </div>

        <!-- Right Pane (Content Area) -->
        <div id="rightPane">
            
            <!-- Profile Section -->
            <div id="profile" class="settings-section active">
                <h2>Public Profile</h2>
                <hr>
                <!-- Profile Picture on the Far Right -->
                <div class="far-right-profile-pic">
                    <p class="profile-pic-title">Profile Picture</p>
                    <img src="/images/account.png" alt="Current Profile Picture" id="current-profile-pic">
                    <button type="button" class="edit-profile-pic-button">
                        <img src="/images/pencil.png" alt="Edit Icon" class="edit-profile-icon">
                        Edit
                    </button>
                    <input type="file" id="profile-pic-input" accept="image/*" style="display: none;">
                </div>
                

                <form>
                    <div class="form-group">
                        <label for="first-name">Name</label>
                        <input type="text" id="first-name" name="first-name" placeholder="Enter your first name">
                        <p class="label-description">Your name may apear in Trade Visionary  where you contribute or are mentioned. You can remove it at any time.</p>
                    </div>
                    <div class="form-group">
                        <label for="surname">Surname</label>
                        <input type="text" id="surname" name="surname" placeholder="Enter your surname">
                        <p class="label-description">Your surname will stay here, even if you update your Google Account.</p>
                    </div>
           
                    <div class="form-group">
                        <label for="public-email">Public Email</label>
                        <div class="email-select-container">
                            <select id="public-email" name="public-email">
                                <option value="non-selected-value">Select a verified email to display</option>
                            </select>
                            <a href="#" class="remove-email">X Remove</a>  
                        </div>
                        <p>You can add new emails adding new trading accounts <a href="#" style="color: #42a5f5;">here</a>.</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="bio">Bio</label>
                        <textarea id="bio-input" name="bio" rows="3"></textarea>
                        <p class="label-description">Write a short description about yourself, it'll apear in your profile</p>
                    </div>                

                    <h2>Profile settings</h2>
                    <hr>

                    <div class="form-group">
                        <label for="url">URL</label>
                        <input type="url" id="url-input" name="url" value="https://example.com" placeholder="https://yourwebsite.com">
                        <p class="label-description">Provide a link to your Profit & Loss statement to make it easier for you to access.</p>
                    </div>
        
                    <div class="form-group">
                        <label for="main-used-exchange">Used Exchange</label>
                        <select id="main-used-exchange" name="used-exchange">
                            <option value="Bitget">Bitget</option>
                            <option value="Binance">Binance</option>
                        </select>
                        <p>Select the exchange you use.</p>
                    </div>
        
                    <div class="form-group">
                        <label for="trading-experience">Trading Experience</label>
                        <select id="trading-experience" name="trading-experience">
                            <option value="none-selected">Select your experience</option>
                            <option value="less-one-year">Less than 1 year</option>
                            <option value="1-2-years">1-2 years</option>
                            <option value="2-5-years">2-5 years</option>
                            <option value="5-10-years">5-10 years</option>
                            <option value="10-years">10+ years</option>
                        </select>
                        <p>Select your trading experience.</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" name="location" value="Barcelona/Spain" placeholder="Enter your location">
                        <p class="label-description">Enter your current location.</p>
                    </div>
        
                    <button type="submit" onclick="update_user_profile(event)">Update Profile</button>
                </form>
            </div>

            <!-- Account Section -->
            <div id="account" class="settings-section">
                <h2>Change Username</h2>
                <hr>
                <p class="label-description-b">Changing your username can have <a href="#">unintended side effects</a>.</p>
                <div class="form-group">
                    <button class="clasic-config-button">Change Username</button>
                    <p class="label-description" style="margin-top: 10px;">You can only change your username once per month.</p>
                </div>
        
                <h2 style="margin-top: 40px;">Manage Trading Accounts</h2>
                <hr>
                <p class="label-description-b">You can only use one trading account for trading; however, you can have multiple accounts to view assets. For more information, please check the <a href="#">accounts documentation</a>.</p>
                <div class="trading-account">
                    <div class="trad-acc-select">
                        <label for="select-trade-account">Main trading account</label>
                        <div class="select-link-container">
                            <select id="trading-account" name="trading-account">
                                <option value="no-added">No trading account added</option>
                            </select>
                            <a href="#" class="remove-email">X Remove</a> 
                        </div>
                        <p class="label-description">Select your main trading account for your dashboard</p>
                    </div>
                    <div class="trad-acc-add">
                        <label>Add new trading account</label>
                        <button class="clasic-config-button" onclick="openCredentialsWindow()">Add account</button>
                    </div>
                </div>
                <h2 style="margin-top: 40px; color: #f85149;">Delete Account</h2>
                <hr>
                <p class="label-description">Once you delete your account, all data associated with it will be permanently deleted, and it cannot be recovered.</p>
                
                <button class="delete-account-button">Delete your account</button>
                <p class="label-description-b">If you delete your account you will not be able <a href="#">recover it</a>.</p>
                <div id="delete-confirmation" class="confirm-dialog-bg" style="display:none;">
                    <div class="confirm-dialog">
                        <h3>Really want to delete your account?</h3>
                        <div class="warning-section">
                            <img src="/images/icons/warning.png" alt="Warning Icon" class="warning-icon">
                            <span>Failed to authenticate with the given credentials</span>
                        </div>
                        <ul class="delete-warnings-list">
                            <li>Your account data will be deleted within 30-90 days.</li>
                            <li>All your personal information will be removed from our servers.</li>
                            <li>You will lose access to all your trading bots.</li>
                            <li>We will not set up redirects for your profile or your bots.</li>
                            <li>Your username will be available for others to use after deletion.</li>
                        </ul>
                
                        <button class="confirm-delete-button" onclick="delete_user_full_account(event)">I undersand, delete my account</button>
                        <button class="cancel-delete-button">Cancel</button>
                    </div>
                </div>
                
            </div>    
            <div id="appearance" class="settings-section">
                <h2>Apperance Section (Not added yet)</h2>
                <hr>
            </div>
       
            <div id="billing" class="settings-section">
                <h2>Billing & Plans Section (Not added yet)</h2>
                <hr>
            </div>

            <div id="api" class="settings-section">
                <h2>API Connections Section (Not added yet)</h2>
                <hr>
            </div>

        </div>
    </div>
    <div id="overlay" class="overlay"></div>
    <script>
        function showDeleteConfirmation() {
            document.getElementById('delete-confirmation').style.display = 'flex';
            document.addEventListener('keydown', handleKeyDown);
        }

        function hideDeleteConfirmation() {
            document.getElementById('delete-confirmation').style.display = 'none';
            document.removeEventListener('keydown', handleKeyDown);
        }

        function handleKeyDown(event) {
            if (event.key === 'Escape') {
                hideDeleteConfirmation();
            }
        }

        document.querySelector('.delete-account-button').addEventListener('click', showDeleteConfirmation);
        document.querySelector('.cancel-delete-button').addEventListener('click', hideDeleteConfirmation);
        document.getElementById('delete-confirmation').addEventListener('click', (event) => {
            if (event.target === document.getElementById('delete-confirmation')) {
                hideDeleteConfirmation();
            }
        });

        document.querySelector('.confirm-delete-button').addEventListener('click', () => {
            hideDeleteConfirmation();
        });
    </script>
</body>
</html>
