<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings</title>
    <link rel="icon" href="/images/thumnails/original_logo.png" type="image/png">

    <!-- Add responsive meta tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Styles -->
    <link rel="stylesheet" href="/styles/logged-user/user-header.css">
    <link rel="stylesheet" href="/styles/logged-user/user-settings.css">
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Montserrat:wght@400;700&family=Roboto&display=swap" rel="stylesheet">

    <!-- Scripts -->
    <script src="/config.js"></script>
    <script src="/scripts/main-scripts/globalProvider.js" defer></script>
    <script src="/scripts/main-scripts/set-profile.js" defer></script>
    <script src="/scripts/user-dashboard/crypto-searcher.js" defer></script>
    <script src="/scripts/user-settings/user-settings-account.js" defer></script>
    <script src="/scripts/user-settings/user-settings-profile.js" defer></script>
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-p1a6gU+hX3cwD+eYcB6Zs3aQzFQnHtCpjFE6QzN0n1q7g1IbJVEc4GtE6mC6p5I/VD+T5g6dQ0K1YxXaER4jKg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    />
</head>
<body>
    <header class="header">
        <!-- Left Section: Logo and Brand Name -->
        <a href="/dashboard" class="header-left" id="header-left-side">
          <img src="/images/thumnails/logo.png" alt="Fundy Logo" class="logo">
          <h1 class="logo-text">Fundy</h1>
        </a>
      
        <!-- Center Section: Search Bar -->
        <div class="header-center">
          <!-- Search Bar with Icon -->
          <div class="search-container">
            <img src="/images/search.png" alt="Search Icon" class="search-icon">
            <input type="text" class="header-search" placeholder="Type / Search a crypto" id="crypto-search-input" autocomplete="off"/>
            <div id="search-results" class="search-results hidden"></div>
          </div>
        </div>
      
        <!-- Right Section: Gear, Notification, and User Icons -->
        <div class="header-right">
  
          <button class="promotion-button">
            <span>Upgrade Now</span>
            <img src="/images/icons/rocket-lunch.png" alt="Promotion Icon"/>
          </button>
          
          <!-- Gear Icon (Settings) -->
          <img src="/images/icons/setting.png" alt="Settings Icon" class="gear-icon" tabindex="0" role="button" aria-label="Settings" onclick="openSettings(event)" />
          <!-- Settings Menu -->
          <div id="settings-menu" class="settings-menu">
            <ul class="settings-links">
              <!-- LANGUAGE -->
              <li>
                <span>Language</span>
                <select class="menu-select" id="language-select">
                  <option value="en">English (EN)</option>
                  <option value="es">Español (ES)</option>
                  <option value="fr">Français (FR)</option>
                  <option value="de">Deutsch (DE)</option>
                  <option value="zh">中文 (ZH)</option>
                </select>
              </li>
          
              <!-- CURRENCY -->
              <li>
                <span>Currency</span>
                <select class="menu-select" id="currency-select">
                  <option value="usd">USD</option>
                  <option value="btc">BTC</option>
                  <option value="eur">EUR</option>
                  <option value="mxn">MXN</option>
                  <option value="gbp">GBP</option>
                </select>
              </li>
          
              <!-- DARK MODE -->
              <li>
                <span>Dark Mode</span>
                <label class="switch">
                  <input type="checkbox" id="dark-mode-toggle" />
                  <span class="slider round"></span>
                </label>
              </li>
          
              <!-- NOTIFICATION ORDER -->
              <li>
                <span>Notifications</span>
                <select class="menu-select" id="notification-order">
                  <option value="recent">Most Recent</option>
                  <option value="unread">Unread First</option>
                  <option value="priority">Priority</option>
                </select>
              </li>
            </ul>
          </div>
          
          <!-- Notification Icon -->
          <img src="/images/icons/notification.png" alt="Notification Icon" class="notification-icon" tabindex="0" role="button" aria-label="Notifications" />
      
          <!-- User Icon -->
          <img src="/images/icons/user.png" alt="User Icon" class="user-icon" onclick="toggleMenu1(event)" id="profile-icon3" tabindex="0" role="button" aria-label="User Profile" />
          
          <!-- SUbmenu for the user -->
          <div id="profile-menu" class="profile-menu">
            <div class="profile-header">
              <img src="/images/icons/account.png" alt="User Icon" class="profile-picture"/>
              <div class="profile-info">
                <p class="profile-name" id="user-name">Loading...</p>
                <span class="profile-email" id="user-email">Loading...</span>
              </div>
            </div>
            <hr />
            <ul class="menu-links">
              <li onclick="window.location.href='/settings/profile';">
                <img src="/images/icons/user2.png" alt="Profile Icon" class="menu-icon" />
                User Profile
              </li>
              <li onclick="window.location.href='/settings/preferences';">
                <img src="/images/icons/preferences.png" alt="Settings Icon" class="menu-icon"/>
                Preferences
              </li>
              <li onclick="window.location.href='/settings/billing';" style="padding: 7px 15px;">
                <img src="/images/icons/billing_plan.png" alt="Billing & Planss Icon" class="menu-icon"/>
                Billing & Plans
                <img src="/images/icons/free.png" alt="More Info Icon" class="menu-icon-right"/>
              </li>
              <li onclick="window.location.href='/settings/billing';">
                <img src="/images/icons/shield2.png" alt="Billing & Planss Icon" class="menu-icon"/>
                Security(2FA)
              </li>
              <li onclick="log_out(event)">
                <img src="/images/icons/logout.png" alt="Logout Icon" class="menu-icon" />
                Sign Out
              </li>
              <hr />
              <li onclick="window.location.href='/terms-policies';">
                  <img src="/images/terms-and-conditions.png" alt="Terms Icon" class="menu-icon" />
                  Terms &amp; Policies
              </li>
              <li>
                <img src="/images/icons/help.png" alt="Help Icon" class="menu-icon" />
                Help
              </li>
            </ul>
          </div>
        </div>
    </header>
  

    <div id="notification-bar" class="notification-bar">
        <p id="notification-message">Your profile has been updated successfully!</p>
        <span id="close-notification" class="close-notification">&times;</span>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Left Pane (User Summary and Navigation Menu) -->
        <div id="leftPane">
            <!-- User Summary -->
            <div class="profile-summary">
                <img src="/images/icons/user2.png" alt="User Profile picture" id="user-profile-picture">
                <div class="user-info">
                    <span class="username" id="user-name-main">@Username</span>
                    <span class="fullname" id="full-name-main">Name Surname</span>
                </div>
            </div>
            
            <hr class="left-pane-hr">
            <!-- Navigation Menu -->
            <ul class="settings-menu-left-pane">
                <li data-section="profile" onclick="showSection('profile', event)"><img src="/images/icons/user2.png" alt="Profile Icon">Profile</li>
                <li data-section="account" onclick="showSection('preferences', event)"><img src="/images/icons/preferences.png" alt="Preferences Icon">Preferences</li>
                <li data-section="billing" onclick="showSection('billing', event)"><img src="/images/icons/billing_plan.png" alt="Billing Icon">Billing & Plans</li>
                <li data-section="appearance" onclick="showSection('security', event)"><img src="/images/icons/verified.png" alt="Appearance Icon">Security(2FA)</li>
                <li data-section="api" onclick="showSection('api', event)"><img src="/images/icons/api.png" alt="API Icon">API Connections</li>
            </ul>                     
        </div>

        <!-- Right Pane (Content Area) -->
        <div id="rightPane">
            
            <!-- Profile Section -->
            <div id="profile" class="settings-section active">
                <h2>Public Profile</h2>
                <hr>
                <!-- Profile Picture on the Far Right -->
                <div class="far-right-profile-pic">
                    <p class="profile-pic-title">Profile Picture</p>
                    <img src="/images/account.png" alt="Current Profile Picture" id="current-profile-pic">
                    <button type="button" class="edit-profile-pic-button">
                        <img src="/images/pencil.png" alt="Edit Icon" class="edit-profile-icon">
                        Edit
                    </button>
                    <input type="file" id="profile-pic-input" accept="image/*" style="display: none;">
                </div>
                

                <form>
                    <div class="form-group">
                        <label for="first-name">Name</label>
                        <input type="text" id="first-name" name="first-name" placeholder="Enter your first name">
                        <p class="label-description">Your name appear in your public profile.</p>
                    </div>
                   
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email-input" name="email" readonly>
                        <p class="label-description">This is the email registered in Fundy, cannot be changed.</p>
                    </div>
           
                    <div class="form-group">
                        <label for="public-email">Public Email</label>
                        <div class="email-select-container">
                            <select id="public-email" name="public-email">
                                <option value="non-selected-value">Select a verified email to display</option>
                            </select>
                            <a href="#" class="remove-email">X Remove</a>  
                        </div>
                        <p>You can add new emails adding new trading accounts <a href="#" style="color: #42a5f5;">here</a>.</p>
                    </div>           

                    <h2>Activity Logs</h2>
                    <hr>

                    <div class="form-group">
                        <label for="url">URL</label>
                        <input type="url" id="url-input" name="url" value="https://example.com" placeholder="https://yourwebsite.com">
                        <p class="label-description">Provide a link to your Profit & Loss statement to make it easier for you to access.</p>
                    </div>
        
                    <div class="form-group">
                        <label for="main-used-exchange">Used Exchange</label>
                        <select id="main-used-exchange" name="used-exchange">
                            <option value="Bitget">Bitget</option>
                            <option value="Binance">Binance</option>
                            <option value="Kucoin">Kucoin</option>
                            <option value="Okx">OKX</option>
                        </select>
                        <p>Select the exchange you use.</p>
                    </div>
        
                    <div class="form-group">
                        <label for="trading-experience">Trading Experience</label>
                        <select id="trading-experience" name="trading-experience">
                            <option value="none-selected">Select your experience</option>
                            <option value="less-one-year">Less than 1 year</option>
                            <option value="1-2-years">1-2 years</option>
                            <option value="2-5-years">2-5 years</option>
                            <option value="5-10-years">5-10 years</option>
                            <option value="10-years">10+ years</option>
                        </select>
                        <p>Select your trading experience.</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" name="location" value="Barcelona/Spain" placeholder="Enter your location">
                        <p class="label-description">Enter your current location.</p>
                    </div>
        
                    <button type="submit" onclick="update_user_profile(event)">Update Profile</button>

                    <h2 style="margin-top: 40px; color: #f85149;">Delete Account</h2>
                <hr>
                <p class="label-description">Once you delete your account, all data associated with it will be permanently deleted, and it cannot be recovered.</p>
                
                <button class="delete-account-button">Delete your account</button>
                <p class="label-description-b">If you delete your account you will not be able <a href="#">recover it</a>.</p>
                <div id="delete-confirmation" class="confirm-dialog-bg" style="display:none;">
                    <div class="confirm-dialog">
                        <h3>Really want to delete your account?</h3>
                        <div class="warning-section">
                            <img src="/images/icons/warning.png" alt="Warning Icon" class="warning-icon">
                            <span>Failed to authenticate with the given credentials</span>
                        </div>
                        <ul class="delete-warnings-list">
                            <li>Your account data will be deleted within 30-90 days.</li>
                            <li>All your personal information will be removed from our servers.</li>
                            <li>You will lose access to all your trading bots.</li>
                            <li>We will not set up redirects for your profile or your bots.</li>
                            <li>Your username will be available for others to use after deletion.</li>
                        </ul>
                
                        <button class="confirm-delete-button" onclick="delete_user_full_account(event)">I undersand, delete my account</button>
                        <button class="cancel-delete-button">Cancel</button>
                    </div>
                </div>
                </form>
            </div>

            <!-- Account Section -->
            <div id="preferences" class="settings-section">
                <h2>Change Username</h2>
                <hr>
                <p class="label-description-b">Changing your username can have <a href="#">unintended side effects</a>.</p>
                <div class="form-group">
                    <button class="clasic-config-button">Change Username</button>
                    <p class="label-description" style="margin-top: 10px;">You can only change your username once per month.</p>
                </div>
        
                <h2 style="margin-top: 40px;">Manage Trading Accounts</h2>
                <hr>
                <p class="label-description-b">You can only use one trading account for trading; however, you can have multiple accounts to view assets. For more information, please check the <a href="#">accounts documentation</a>.</p>
                <div class="trading-account">
                    <div class="trad-acc-select">
                        <label for="select-trade-account">Main trading account</label>
                        <div class="select-link-container">
                            <select id="trading-account" name="trading-account">
                                <option value="no-added">No trading account added</option>
                            </select>
                            <a href="#" class="remove-email">X Remove</a> 
                        </div>
                        <p class="label-description">Select your main trading account for your dashboard</p>
                    </div>
                    <div class="trad-acc-add">
                        <label>Add new trading account</label>
                        <button class="clasic-config-button" onclick="openCredentialsWindow()">Add account</button>
                    </div>
                </div>
                
            </div>    
       
            <div id="billing" class="settings-section">
                <h2>Billing & Plans Section (Not added yet)</h2>
                <hr>
            </div>

            <div id="security" class="settings-section">
                <h2>Security (2FA)Section (Not added yet)</h2>
                <hr>
            </div>

            <div id="api" class="settings-section">
                <h2>API Connections Section (Not added yet)</h2>
                <hr>
            </div>

        </div>
    </div>
    <div id="overlay" class="overlay"></div>
    <script>
        function showDeleteConfirmation() {
            document.getElementById('delete-confirmation').style.display = 'flex';
            document.addEventListener('keydown', handleKeyDown);
        }

        function hideDeleteConfirmation() {
            document.getElementById('delete-confirmation').style.display = 'none';
            document.removeEventListener('keydown', handleKeyDown);
        }

        function handleKeyDown(event) {
            if (event.key === 'Escape') {
                hideDeleteConfirmation();
            }
        }

        document.querySelector('.delete-account-button').addEventListener('click', showDeleteConfirmation);
        document.querySelector('.cancel-delete-button').addEventListener('click', hideDeleteConfirmation);
        document.getElementById('delete-confirmation').addEventListener('click', (event) => {
            if (event.target === document.getElementById('delete-confirmation')) {
                hideDeleteConfirmation();
            }
        });

        document.querySelector('.confirm-delete-button').addEventListener('click', () => {
            hideDeleteConfirmation();
        });
    </script>
</body>
</html>
